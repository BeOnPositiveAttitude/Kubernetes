Основные компоненты кластера K8s:

- API Server
- etcd
- kubelet
- Container Runtime
- Controllers
- Scheduler

API Server - frontend для управления кластером.

etcd - key/value хранилище, используемое для хранения данных о кластере. Если в кластере несколько master-ов и worker-ов, etcd хранит эту информацию в распределенном виде. etcd обеспечивает механизм блокировок в кластере, чтобы не было конфликтов между мастерами.

Scheduler - отвечает за распределение нагрузки по нодам кластера, смотрит за появлением новых контейнеров и назначает их на ноды.

Controllers - следят и реагируют на события аля падение ноды, контейнера, endpoint-а, а также принимают решения о запуске новых контейнеров в этом случае.

kubelet - агенты на нодах, которые следят, что контейнеры на нодах запущены так, как это ожидается. kubelet агент на worker-нодах взаимодействует с API Server на мастере и предоставляет информацию о здоровье worker-нод и выполняет действия назначенные мастером на worker-нодах.

Master состоит из: API Server, etcd, Controllers, Scheduler.

Worker состоит из: Container Runtime и kubelet-агент.