# по умолчанию все pod-s могут "достучаться" друг до друга
# сетевая изоляция может быть сконфигурирована для блокирования трафика к pod-ам с помощью запуска pod-ов в выделенных namespaces
# NetworkPolicy может быть использована для блокирования как Egress (исходящего), так и Ingress (входящего) трафика и работает подобно firewall
# использование NetworkPolicy зависит от поддержки сетевого провайдера; не все они предлагают поддержку и в этом случае ваша политика не будет иметь эффекта!
# подключения по умолчанию являются stateful; разрешение трафика в одном направлении является достаточным
# то есть, если мы например указали в ingress pod-а с БД правило, которое разрешает входящий трафик от pod-а с веб-сервером и при этом в egress правилах pod-а с БД пусто, тем не менее этого достаточно, чтобы исходящий трафик от pod-а с БД к pod-у с веб-сервером также был разрешен
# Labels используются, чтобы определить к чему применяется политика
kubectl explain NetworkPolicy.spec   #смотрите для большей информации

# политики работают с двумя направлениями: Ingress и Egress
# если направление (Ingress или Egress) указано в манифесте, но далее ничего не указано, тогда нет ограчений
# если направление указано и содержит спецификацию, тогда будет использована спецификация
# смотрите pods-with-nw-policy.yaml для примера

kubectl get networkpolicy
kubectl get networkpolicy -o yaml
