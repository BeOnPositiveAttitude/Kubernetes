Как мы уже обсуждали ранее K8s scheduler отвечает за планирование (scheduling) pod-ов на ноды. Важно понимать, что scheduler отвечает только за принятие решения, какой pod на какую ноду будет размещен. Сам он фактически не размещает pod-ы на нодах. Это работа kubelet. Kubelet или капитан корабля создает pod-ы на кораблях. Scheduler только решает какой pod куда пойдет.

Зачем нам нужен scheduler? Существует множество кораблей и множество контейнеров. Вы хотите быть уверены, что нужный контейнер окажется на нужном корабле. Например корабли и контейнеры могут иметь разные размеры. Вы хотите быть уверены, что корабль обладает достаточной вместимостью для размещения этих контейнеров. Разные корабли могут иметь разные точки назначения. Вы хотите быть уверены, что ваши контейнеры размещены на подходящих кораблях и в итоге окажутся в нужной точке назначения.

В K8s scheduler принимает решение на какую ноду разместить pod в зависимости от определенных критериев. У вас могут быть pod-ы с различным требованиями по ресурсам. У вас могут быть ноды кластера, выделенные для определенных приложений. Итак как scheduler назначает pod-ы? Scheduler смотрит на каждый pod и пытается найти наиболее подходящую для него ноду.

Рассмотри пример - синий pod. Он имеет набор требований по CPU и памяти. Scheduler проходит через две фазы для определения наиболее подходящей ноды для этого pod-а. На первой фазе scheduler пытается отфильтровать ноды, которые НЕ подходят по профилю для этого pod-а.

<img src="image.png" width="800" height="350"><br>