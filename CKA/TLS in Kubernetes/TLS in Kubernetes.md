Существует три типа сертификатов:
- серверные сертификаты, настроенные на серверах приложений (`server.crt` или `server.pem`)
- корневые сертификаты, настроенные на серверах CA
- клиентские сертификаты, настроенные на клиентах (`client.crt` или `client.pem`)

Все взаимодействия между нодами кластера K8s должны быть защищены и зашифрованы. Все взаимодействия между сервисами и их клиентами также должны быть защищены. Например администратор, взаимодействующий с кластером K8s с помощью утилиты kubectl или с помощью прямых вызовов API, должен установить безопасное TLS-соединение. Связь между всем компонентами кластера также должна быть защищена.

Существуют два главных требования - все различные сервисы в кластере должны использовать серверные сертификаты, а все клиенты должны использовать клиентские сертификаты для проверки, что они действительно являются теми, за кого себя выдают.

Рассмотрим серверные сертификаты в кластере.

Начнем с kube-apiserver. Как мы уже знаем, API-сервер публикует наружу HTTPS-сервис, который используется другими компонентами, а также внешними пользователями для управления кластером. Т.к. это сервер, то ему требуются сертификаты для защиты взаимодействия с клиентами. Поэтому мы генерируем сертификат и пару ключей - `apiserver.crt` и `apiserver.key`.

В зависимости от того каким образом был развернут кластер, имена сертификатов и ключей могут различаться.

Другой сервер в кластере - это etcd. Etcd-сервер хранит информацию обо всем кластере. Поэтому ему требуется пара ключ/сертификат для себя - `etcdserver.crt` и `etcdserver.key`.

Другие серверные компоненты кластера находятся на worker-нодах. Сервер kubelet также публикует HTTPS API endpoint, с которым может общаться kube-apiserver для взаимодействия с worker-нодами. И снова требуется пара ключ/сертификат - `kubelet.crt` и `kubelet.key`.

Теперь перейдем к клиентским сертификатам.

Кто в этом случае является клиентом, взаимодействующим с этими сервисами? Клиенты, обращающиеся к API-серверу, это мы, администраторы. Пользователю admin нужны сертификат и пара ключей для аутентификации в API-сервере - `admin.crt` и `admin.key`. 